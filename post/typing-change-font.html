<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <meta name="keywords" content="typing, 主题, theme"><meta name="description" content="https://typing.yasinchan.com/ 主题切换介绍"><link rel="icon" href="https://file.yasinchan.com/rPAaaJxvP0KoTDILIYwSfGxWjUT51d8X/D018B6FFE06A79F3EE14730D88214BEE.png"><script src="/iconfont.js"></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?7a4553a66f119e8706760cec79cafbbf";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-8C7G0NW5CR"></script><script> window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8C7G0NW5CR');</script><title>Typing 项目技术总结 - 通用模块（字体切换系列） | YasinChan 的博客</title>
    <link rel="preload" href="/assets/style-DtFysu9h.css" as="style"><link rel="stylesheet" href="/assets/style-DtFysu9h.css">
    <link rel="modulepreload" href="/assets/app-Ck2BnQe9.js"><link rel="modulepreload" href="/assets/typing-change-font.html-CtT_MO0v.js">
    <link rel="prefetch" href="/assets/index.html-CNovLDqH.js" as="script"><link rel="prefetch" href="/assets/blog.html-Bzd53X_Z.js" as="script"><link rel="prefetch" href="/assets/me.html-DOCzVnhH.js" as="script"><link rel="prefetch" href="/assets/about-slate.html-BXNyS_vS.js" as="script"><link rel="prefetch" href="/assets/callback-hell.html-Ark66SlT.js" as="script"><link rel="prefetch" href="/assets/git-push.html-CuoCVwDz.js" as="script"><link rel="prefetch" href="/assets/git-submodule.html-DTBV30vE.js" as="script"><link rel="prefetch" href="/assets/html-different-space-slate.html-OC0KaHi3.js" as="script"><link rel="prefetch" href="/assets/nginx-gzip.html-CyBYsRoP.js" as="script"><link rel="prefetch" href="/assets/regexp-test-exec.html-DuwwASpi.js" as="script"><link rel="prefetch" href="/assets/slate-after-entering-a.html-BTBU69P1.js" as="script"><link rel="prefetch" href="/assets/typing-enter.html-Bxm9quvM.js" as="script"><link rel="prefetch" href="/assets/typing-game.html-BdZeeImr.js" as="script"><link rel="prefetch" href="/assets/typing-intr.html-BmbF4xTo.js" as="script"><link rel="prefetch" href="/assets/vetur-vue-error.html-CVYoN2so.js" as="script"><link rel="prefetch" href="/assets/word-break-word-break.html-Dw5Ig3-9.js" as="script"><link rel="prefetch" href="/assets/zero-width-space.html-BahI9JDL.js" as="script"><link rel="prefetch" href="/assets/404.html-8P4-zOUP.js" as="script"><link rel="prefetch" href="/assets/index.html-fWEbc_TZ.js" as="script"><link rel="prefetch" href="/assets/index.html-B2VK79qD.js" as="script"><link rel="prefetch" href="/assets/index.html-DSPwj6Pc.js" as="script"><link rel="prefetch" href="/assets/index.html-BL0Y15Un.js" as="script"><link rel="prefetch" href="/assets/index.html-B7zhFJWN.js" as="script"><link rel="prefetch" href="/assets/index.html-D8CZE5A5.js" as="script"><link rel="prefetch" href="/assets/index.html-D_ZjJ96F.js" as="script"><link rel="prefetch" href="/assets/index.html-74oRnf-N.js" as="script"><link rel="prefetch" href="/assets/index.html-CiH9SZNK.js" as="script"><link rel="prefetch" href="/assets/index.html-C9-e1YP3.js" as="script"><link rel="prefetch" href="/assets/index.html-Cd7YmJjP.js" as="script"><link rel="prefetch" href="/assets/index.html-B_XzezL0.js" as="script"><link rel="prefetch" href="/assets/index.html-BZ1EMenC.js" as="script"><link rel="prefetch" href="/assets/index.html-CWvMnOv_.js" as="script"><link rel="prefetch" href="/assets/index.html-BHRuEpbo.js" as="script"><link rel="prefetch" href="/assets/index.html-_SRoCKTN.js" as="script"><link rel="prefetch" href="/assets/index.html-DsRFuLFu.js" as="script"><link rel="prefetch" href="/assets/index.html-BvbuF1st.js" as="script"><link rel="prefetch" href="/assets/index.html-DzR_fULM.js" as="script"><link rel="prefetch" href="/assets/index.html-fNfPnZOu.js" as="script"><link rel="prefetch" href="/assets/index.html-DS5Kh_vx.js" as="script"><link rel="prefetch" href="/assets/index.html-QGQRPcoG.js" as="script"><link rel="prefetch" href="/assets/index.html-Dv9X3oL2.js" as="script"><link rel="prefetch" href="/assets/index.html-DGP_QEmv.js" as="script"><link rel="prefetch" href="/assets/index.html-CT44rxNl.js" as="script"><link rel="prefetch" href="/assets/index.html-DP6m1dv0.js" as="script"><link rel="prefetch" href="/assets/index.html-DWy31x4x.js" as="script"><link rel="prefetch" href="/assets/index.html-CsrEo3PF.js" as="script"><link rel="prefetch" href="/assets/index.html-C6AOkSrh.js" as="script"><link rel="prefetch" href="/assets/index.html-C53Ufrj6.js" as="script"><link rel="prefetch" href="/assets/index.html-Dj6gyOW1.js" as="script"><link rel="prefetch" href="/assets/index.html-CQ9EL_ez.js" as="script"><link rel="prefetch" href="/assets/index.html-99NUFztv.js" as="script"><link rel="prefetch" href="/assets/index.html-CCRj9nJV.js" as="script"><link rel="prefetch" href="/assets/index.html-CRV5DF-m.js" as="script"><link rel="prefetch" href="/assets/SearchResult-BiPen5Rz.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="logo" src="https://file.yasinchan.com/rPAaaJxvP0KoTDILIYwSfGxWjUT51d8X/D018B6FFE06A79F3EE14730D88214BEE.png" alt="YasinChan 的博客"><span class="site-name can-hide" aria-hidden="true">YasinChan 的博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a class="route-link route-link-active" href="/post/" aria-label="博客"><!--[--><!--]--> 博客 <!--[--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/tags/" aria-label="标签"><!--[--><!--]--> 标签 <!--[--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/archives/" aria-label="归档"><!--[--><!--]--> 归档 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="关于"><span class="title">关于</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="关于"><span class="title">关于</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/about/blog.html" aria-label="此博客"><!--[--><!--]--> 此博客 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/about/me.html" aria-label="我"><!--[--><!--]--> 我 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="好玩"><span class="title">好玩</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="好玩"><span class="title">好玩</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://qm.yasinchan.com" rel="noopener noreferrer" target="_blank" aria-label="Quick Meet"><!--[--><!--]--> Quick Meet <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://typing.yasinchan.com" rel="noopener noreferrer" target="_blank" aria-label="Typing"><!--[--><!--]--> Typing <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/yasinchan" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="search-pro-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a class="route-link route-link-active" href="/post/" aria-label="博客"><!--[--><!--]--> 博客 <!--[--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/tags/" aria-label="标签"><!--[--><!--]--> 标签 <!--[--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/archives/" aria-label="归档"><!--[--><!--]--> 归档 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="关于"><span class="title">关于</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="关于"><span class="title">关于</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/about/blog.html" aria-label="此博客"><!--[--><!--]--> 此博客 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/about/me.html" aria-label="我"><!--[--><!--]--> 我 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="好玩"><span class="title">好玩</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="好玩"><span class="title">好玩</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://qm.yasinchan.com" rel="noopener noreferrer" target="_blank" aria-label="Quick Meet"><!--[--><!--]--> Quick Meet <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://typing.yasinchan.com" rel="noopener noreferrer" target="_blank" aria-label="Typing"><!--[--><!--]--> Typing <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/yasinchan" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Typing 项目技术总结 - 通用模块（字体切换系列） <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="#切换字体" aria-label="切换字体"><!--[--><!--]--> 切换字体 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="#link-preload" aria-label="link preload"><!--[--><!--]--> link preload <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="typing-项目技术总结-通用模块-字体切换系列" tabindex="-1"><a class="header-anchor" href="#typing-项目技术总结-通用模块-字体切换系列"><span>Typing 项目技术总结 - 通用模块（字体切换系列）</span></a></h1><p>地址：<a href="https://typing.yasinchan.com" target="_blank" rel="noopener noreferrer">https://typing.yasinchan.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>源码：<a href="https://github.com/YasinChan/typing" target="_blank" rel="noopener noreferrer">https://github.com/YasinChan/typing<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="https://file.yasinchan.com/Ah4n6YhrHtTazLbAGidp2oNzwttOiUFb/766579006.png" alt=""></p><h2 id="切换字体" tabindex="-1"><a class="header-anchor" href="#切换字体"><span>切换字体</span></a></h2><p>正如<a class="route-link" href="/post/typing-intr.html">前文</a>所言，本站是个文字为主的站点，所以对于文字本身可以做更多的定制，字体则是其中一个可以改变的点。</p><p>我在互联网上找到了一些免费或者开源的字体网站，从中找到一些个人认为比较适合的字体。比如我这里使用到是如下四个：</p><ul><li><a href="https://wordshub.github.io/free-font/" target="_blank" rel="noopener noreferrer">free-font<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://fonts.google.com/" target="_blank" rel="noopener noreferrer">Google Fonts<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://github.com/atelier-anchor/smiley-sans" target="_blank" rel="noopener noreferrer">得意黑<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://fonts.alibabagroup.com/#/home" target="_blank" rel="noopener noreferrer">阿里巴巴普惠体<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><p>一般一个完整的字体 <code>ttf 文件</code> 大小在 几 M 到 几十 M 不等，因此这种字体文件我将其放在 CDN 上了。然后通过 css <code>@font-face</code> 进行定义。</p><div class="language-css line-numbers-mode" data-ext="css" data-title="css"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&#39;zpix&#39;</span><span class="token punctuation">;</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&#39;https://file.yasinchan.com/JudectfYr6GWqWPMRw79gEhCdUhozc36/zpix.ttf&#39;</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>参考 w3c 文档对 <a href="https://www.w3.org/TR/css-fonts-3/?spm=5176.28103460.0.0.297c3f99aJeEs1#font-face-loading" target="_blank" rel="noopener noreferrer">Font loading guidelines<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 的定义，只有在 <code>font-family</code> 被使用时才会被加载</p><p>然后在上图中点击选择对应字体后，将包含对应 <code>font-family</code> 字体样式的 <code>class</code> 设置到对应标签上，此时字体文件会被加载，从而达到动态加载字体文件和切换字体的目的。</p><p>不过由于字体文件一般都比较大，在第一次加载时都会比较久，甚至会有数秒的加载时长，对于用户而言，在这数秒内观感上会觉得没有加载出来。为此，我这里引入了一个用于监听字体文件加载完成的组件库 <a href="https://github.com/bramstein/fontfaceobserver" target="_blank" rel="noopener noreferrer">FontFaceObserver<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ，用于在点击设置字体后动态加载字体文件时，起到监听文件是否加载成功的作用</p><div class="language-tsx line-numbers-mode" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token function">listenFont</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;default&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&#39;默认字体加载成功！&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&#39;&quot;&#39;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&#39;&quot;&#39;</span> <span class="token operator">+</span> <span class="token string">&#39; 字体加载中...&#39;</span><span class="token punctuation">,</span> timeout<span class="token operator">:</span> <span class="token number">8000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> myFont <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FontFaceObserver</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myFont<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&#39;&quot;&#39;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&#39;&quot;&#39;</span> <span class="token operator">+</span> <span class="token string">&#39; 字体加载成功！&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&#39;&quot;&#39;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&#39;&quot;&#39;</span> <span class="token operator">+</span> <span class="token string">&#39; 字体加载失败！&#39;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&#39;error&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里可以看到我为 load 方法加了第二个 8000 的参数，原因是该组件库的描述</p><blockquote><p>The default timeout for giving up on font loading is 3 seconds. You can increase or decrease this by passing a number of milliseconds as the second parameter to the load method.</p></blockquote><p>默认是 3 秒超时，而由于字体文件过大或者 CDN 供应商不给力的原因可能导致加载时间会更长超过 3 秒，所以我这里暂时设置为 8 秒，具体可以查看<a href="https://github.com/YasinChan/typing/blob/877a7a77a399bf492c31af0fb7cf9c8280ac20ad/src/App.vue#L169C1-L184C2" target="_blank" rel="noopener noreferrer">我的源码<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><p>另外如上图，在选择字体弹框里是有个预览字体样式的，如果说当需要预览的时候加载所有完整的字体文件也会有所浪费，所以我这里使用了 <a href="https://github.com/ecomfe/fontmin" target="_blank" rel="noopener noreferrer">fontmin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 工具，用于按需加载字体文件。使用该工具可以将所需要的字符从字体文件中单独打包出来形成一个很小的文件。放到我这里预览的场景，只需要入土中的几个单独的字符。举例来讲，在使用 fontmin 工具之后，可以将 7.2M 的文件减少到只有 6.4k，极大的节约了资源加载。</p><p>另外再说一点，在开发时也考虑过字体资源预加载的方案。这里先引入一个新的概念 <code>link preload</code>。</p><h3 id="link-preload" tabindex="-1"><a class="header-anchor" href="#link-preload"><span><a href="https://html.spec.whatwg.org/multipage/links.html#link-type-preload" target="_blank" rel="noopener noreferrer">link preload<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><p>我们知道 <code>&lt;link&gt;</code> 通常是用来加载样式资源的，不过 <code>&lt;link&gt;</code>  也加入了一些新的有意思的性能和安全特性，这里的 <strong>preload</strong> 就是其一。</p><p>我们知道浏览器在渲染时，当加载到 <code>&lt;img&gt;</code> 标签时才会加载其中的图片资源，就像上面提到的 <code>@font-face</code> ，只有当定义的 <code>font-family</code> 被使用时才会加载其对应的字体资源。基于<a href="https://web.dev/articles/critical-rendering-path?spm=5176.28103460.0.0.74fb3f99KEeKuS&amp;hl=zh-cn" target="_blank" rel="noopener noreferrer">浏览器的工作原理<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，这意味着这些资源只有当执行到对应位置才会加载所需资源，从用户层面讲，视觉上就是图片资源滞后加载或者字体会跳一下加载。</p><p>对此我们可以考虑到，如果能尽快的加载这部分资源，再依赖其他比如加 loading 状态等手段，就可以给到用户更好的体验。</p><p><a href="https://html.spec.whatwg.org/multipage/links.html#link-type-preload" target="_blank" rel="noopener noreferrer">link preload<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 就是做这个“尽快”加载的作用的。利用 link preload 可以将需要提前加载的资源放到 head 里面靠上的位置，即可以起到预加载的作用。再结合浏览器缓存，当 Dom 中使用到这些预加载的资源时，就可以从缓存中拿到。顺便提一下单从字体文件角度而言，如果不是我这里特殊的按需加载的需求，而是全局的正常加载字体文件的需求时，也是需要尽快加载到字体文件的，包括在 <a href="https://web.dev/articles/codelab-preload-web-fonts?hl=zh-cn" target="_blank" rel="noopener noreferrer">web.dev<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 也是提到这一点。</p><p>为什么切换字体这里我会提到预加载呢。因为我在一开始遇到需要按需加载字体，但是由于字体文件过大等待好几秒的问题而想优化时，看到了预加载的方案。当时是有考虑直接在 <code>&lt;head&gt;</code> 中将对应字体资源直接通过 <code>link preload</code> 写进去的，但是考虑到将来可能会增加更多的字体资源，可能会导致一开始加载的资源过多了。后来也有想法是在打开字体选择框的时候动态插入 <code>&lt;link&gt;</code> 预加载字体文件，类似这种：</p><div class="language-tsx line-numbers-mode" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token function">preloadFont</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;link&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  link<span class="token punctuation">.</span>rel <span class="token operator">=</span> <span class="token string">&#39;preload&#39;</span><span class="token punctuation">;</span>
  link<span class="token punctuation">.</span>as <span class="token operator">=</span> <span class="token string">&#39;font&#39;</span><span class="token punctuation">;</span>
  link<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span>
  link<span class="token punctuation">.</span>crossOrigin <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不过发现用户在打开字体选择框到点击字体设置的时间可能只有几秒，是无法将几十 M 的资源都加载出来的，还是会出现选择了一个字体资源后等待多秒才加载出来的情况，最终选择了上面 <a href="https://github.com/bramstein/fontfaceobserver" target="_blank" rel="noopener noreferrer">FontFaceObserver<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 的方案。</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: yasinchan2016@gmail.com">YasinChan</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: yasinchan2016@gmail.com">yasinchan</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-Ck2BnQe9.js" defer></script>
  </body>
</html>
