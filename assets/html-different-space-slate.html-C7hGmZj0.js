import{_ as p,r as t,o as l,c,a as n,b as s,d as a,w as i,e as r}from"./app-DrpWXkc-.js";const u={},d=n("h1",{id:"slate-系列-不同空格的处理",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#slate-系列-不同空格的处理"},[n("span",null,"slate 系列 - 不同空格的处理")])],-1),k=n("blockquote",null,[n("p",null,"slate 的数据在最终渲染到页面后会出现问题，表现为行首空格消失，文字之间的多个空格变成一个空格。而一般的 div contenteditable 中的空格可以连续渲染。")],-1),m=n("p",null,"对于这个问题有几个概念先解释一下",-1),h=n("code",null,"\\u00a0",-1),_=n("code",null,"\\u0020",-1),g={href:"https://zh.wikipedia.org/wiki/%E4%B8%8D%E6%8D%A2%E8%A1%8C%E7%A9%BA%E6%A0%BC",target:"_blank",rel:"noopener noreferrer"},v=n("code",null,"10 km",-1),f=n("code",null,"10",-1),b=n("code",null,"km",-1),x=n("img",{src:"https://qiniu.yasinchan.com/image/image.png",alt:"图一"},null,-1),w=n("li",null,[s("浏览器本身对于由键盘 space 键打出的空格的处理方式如上图，浏览器会自动合并多个连续的空白字符，对于开头的空白字符，也不会渲染出来。在使用 innerText 和 innerHTML 看出区分如图。 "),n("img",{src:"https://qiniu.yasinchan.com/image/image (1).png",alt:"图二"})],-1),y={href:"https://qiniu.yasinchan.com/image/QQ20220117-150233-HD.mp4",target:"_blank",rel:"noopener noreferrer"},E=n("code",null,"\\u0020",-1),q=n("code",null,"\\u00a0",-1),C={href:"https://jsbin.com/qiqezahodu/edit?html,output",target:"_blank",rel:"noopener noreferrer"},j=r(`<p>解释了上面的概念之后再看问题： <code>div contenteditable</code> 中连续空格在上面第三点中解释了。slate 本身由数据渲染，最终储存的数据中的连续空格不会做特殊处理，就是单纯的连 <code>\\u0020</code>。当最终渲染成页面时就会发生上面说的第二种情况，为避免这种情况，我们可以在 slate 中可以在最终保存的数据做二次处理，处理方式可以是比如</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>text <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\u0020{2,}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> len <span class="token operator">=</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">let</span> space <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    space <span class="token operator">+=</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&#39;\\u00a0&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;\\u0020&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> space<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过这种方式在保存之前将 slate json 数据中的 text 做一次处理转成如上面视频中的那样。</p>`,3);function B(N,A){const e=t("ExternalLinkIcon"),o=t("RouteLink");return l(),c("div",null,[d,k,m,n("ol",null,[n("li",null,[s("前端编码过程中常见的空格包括这两个： &nbsp 和由键盘 space 键打出的空格（unicode 分别表示为 "),h,s(" 和 "),_,s("），区别在于如图所示红框区域，前者被称之为"),n("a",g,[s("不可换行空格"),a(e)]),s("，所以在图中出现折行的位置，"),v,s(" 是直接一起换行而不像蓝框中会在 "),f,s(" 和 "),b,s(" 之间折行。 "),x]),w,n("li",null,[s("div 的 contenteditable 属性会在输入空格时做如"),n("a",y,[s("视频"),a(e)]),s("中的效果（Chrome），会依次插入 "),E,s(" 和 "),q,s("，保证了浏览器可以正确渲染出所有空格。")])]),n("blockquote",null,[n("p",null,[s("以上例子中的代码"),n("a",C,[s("参考"),a(e)])])]),j,n("p",null,[s("上一篇 "),a(o,{to:"/post/zero-width-space.html"},{default:i(()=>[s("slate 系列 - 零宽空格在 slate 中的运用")]),_:1})])])}const T=p(u,[["render",B],["__file","html-different-space-slate.html.vue"]]),z=JSON.parse('{"path":"/post/html-different-space-slate.html","title":"slate 系列 - 不同空格的处理","lang":"zh-CN","frontmatter":{"date":"2022-01-15T00:00:00.000Z","tag":["slate","rich-editor","space"],"sticky":true,"excerpt":""},"headers":[],"git":{"updatedTime":1711200423000,"contributors":[{"name":"YasinChan","email":"yasinchan2016@gmail.com","commits":1}]},"filePathRelative":"post/html-different-space-slate.md"}');export{T as comp,z as data};
