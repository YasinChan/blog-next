import{_ as e,r as p,o,c,a as n,b as s,d as t,e as i}from"./app-Dwh3PJcY.js";const l={},r=n("h1",{id:"typing-项目技术总结-通用模块-主题切换系列",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#typing-项目技术总结-通用模块-主题切换系列"},[n("span",null,"Typing 项目技术总结 - 通用模块（主题切换系列）")])],-1),u={href:"https://typing.yasinchan.com",target:"_blank",rel:"noopener noreferrer"},d={href:"https://github.com/YasinChan/typing",target:"_blank",rel:"noopener noreferrer"},k=i(`<blockquote><p>这是一个简约风格的可自定义主题的打字记录和键盘测试网站，可以用来测试打字速度，统计打字错误率，支持回放打字过程，支持排行榜，支持联机比一比功能。同时也支持自定义主题，切换字体，以及登录记录数据等等功能。网站也包含一套用户反馈系统记录反馈信息。</p></blockquote><p>以下是不同模块的技术总结</p><h1 id="通用模块" tabindex="-1"><a class="header-anchor" href="#通用模块"><span>通用模块</span></a></h1><h2 id="切换主题" tabindex="-1"><a class="header-anchor" href="#切换主题"><span>切换主题</span></a></h2><p>切换主题模块涉及了<strong>预设主题</strong>和<strong>自定义主题</strong>两种，对于预设主题，我使用了目前通用的主题切换逻辑。</p><h3 id="预设主题" tabindex="-1"><a class="header-anchor" href="#预设主题"><span>预设主题</span></a></h3><p><img src="https://file.yasinchan.com/JLM2zxbFSe5j7JwItquftrRoe7nExToc/1745432064.png" alt="预设主题"></p><p>我们知道 <code>:root</code>  伪类选择器在 CSS 中用于选择样式表作用域内的最顶层元素，也就是全局范围。同时，我利用 CSS 自定义属性，定义全局通用主题变量，这样在整个文档中都可以引用和使用这些变量。</p><div class="language-css line-numbers-mode" data-ext="css" data-title="css"><pre class="language-css"><code><span class="token comment">/* 颜色变量 dark 模式 */</span>
<span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token comment">/*灰阶颜色 */</span>
  <span class="token property">--gray-08</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
  <span class="token property">--gray-06</span><span class="token punctuation">:</span> #999999<span class="token punctuation">;</span>
  <span class="token property">--gray-04</span><span class="token punctuation">:</span> #666666<span class="token punctuation">;</span>
  <span class="token property">--gray-02</span><span class="token punctuation">:</span> #404040<span class="token punctuation">;</span>

  <span class="token property">--background-gray</span><span class="token punctuation">:</span> #252733<span class="token punctuation">;</span>
  <span class="token property">--layout-background-gray</span><span class="token punctuation">:</span> #30323d<span class="token punctuation">;</span>

  <span class="token property">--key-box-shadow</span><span class="token punctuation">:</span> 2px 2px 4px <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--box-shadow-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* 基础色 */</span>
  <span class="token property">--label-white</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">--main-red</span><span class="token punctuation">:</span> #f64c4c<span class="token punctuation">;</span>
  <span class="token property">--main-color</span><span class="token punctuation">:</span> #15c5ce<span class="token punctuation">;</span>
  <span class="token property">--main-orange</span><span class="token punctuation">:</span> #ff8156<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 颜色变量 light 模式 */</span>
<span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token comment">/*灰阶颜色 */</span>
  <span class="token property">--gray-08</span><span class="token punctuation">:</span> #1d2127<span class="token punctuation">;</span>
  <span class="token property">--gray-06</span><span class="token punctuation">:</span> #52575d<span class="token punctuation">;</span>
  <span class="token property">--gray-04</span><span class="token punctuation">:</span> #a0a5aa<span class="token punctuation">;</span>
  <span class="token property">--gray-02</span><span class="token punctuation">:</span> #d2d7d9<span class="token punctuation">;</span>

  <span class="token property">--background-gray</span><span class="token punctuation">:</span> #f5f7f8<span class="token punctuation">;</span>
  <span class="token property">--layout-background-gray</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>

  <span class="token property">--key-box-shadow</span><span class="token punctuation">:</span> 2px 2px 4px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--box-shadow-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* 基础色 */</span>
  <span class="token property">--label-white</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">--main-red</span><span class="token punctuation">:</span> #f64c4c<span class="token punctuation">;</span>
  <span class="token property">--main-color</span><span class="token punctuation">:</span> #15c5ce<span class="token punctuation">;</span>
  <span class="token property">--main-orange</span><span class="token punctuation">:</span> #ff8156<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),m=n("code",null,"dark",-1),h=n("code",null,"light",-1),v={href:"https://github.com/YasinChan/typing/tree/main/src/assets/theme",target:"_blank",rel:"noopener noreferrer"},b=n("code",null,"import()",-1),g=n("code",null,"link.remove",-1),y=n("code",null,"document.head.appendChild",-1),_={href:"https://github.com/YasinChan/typing/blob/main/src/common/theme.ts",target:"_blank",rel:"noopener noreferrer"},f=n("h3",{id:"自定义主题",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#自定义主题"},[n("span",null,"自定义主题")])],-1),x=n("p",null,[n("img",{src:"https://file.yasinchan.com/iY9lqu2UeDjKEHg7MoRthRitWQHm5N99/4096162448.png",alt:"自定义主题"})],-1),C=n("p",null,"除了预设主题，我这里还开发了一套自定义主题逻辑，可以由用户自定义主题色，然后配合反馈模块，进行展示和评分。我这里也可以根据评分情况将好看的主题也放入预设主题中。",-1),R={href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Specificity",target:"_blank",rel:"noopener noreferrer"},S={href:"https://github.com/YasinChan/typing/blob/main/src/common/color.ts",target:"_blank",rel:"noopener noreferrer"},B=n("p",null,[s("我将主题色分为图中的几种类别，其中"),n("strong",null,"字体颜色"),s("这里，由于涉及到不同区域字体颜色的明暗区别，我将其分为了五种类别。图中可以看到有一个"),n("strong",null,"自动生成"),s("的按钮，这里我是考虑到色彩过多，会过于繁琐，同时可能用户刚开始设置的时候可能会不明白这里明暗的意图，所以我加入了这个自动生成的逻辑。这里我分别从设计和技术两个角度来说明这点：")],-1),w=n("p",null,"设计角度",-1),N=n("p",null,"当我们想突出页面元素的重要性等级时，我们会通过颜色的深浅来体现。对于我这里打字网站的场景而言，文字是网站主体，所以我这里是通过对文字颜色的深浅设置，来达到重要性的表达的。",-1),Y={href:"https://typing.yasinchan.com/",target:"_blank",rel:"noopener noreferrer"},T=n("p",null,"技术角度",-1),G=n("p",null,"我们知道了变暗和变亮的目的，那么现在来实现一下。这里是利用 RGB 来实现这一目标，再说明一下 RGB 的含义：",-1),E=n("p",null,"RGB 代表红（Red）、绿（Green）、蓝（Blue）三种基色。在 RGB 颜色模型中，每种颜色都有一个介于 0 至 255 之间的整数值来表示其亮度或强度，0 表示该颜色通道完全没有贡献（最暗或关闭状态），255 表示该颜色通道的亮度最高（最亮状态）。",-1),q={href:"https://github.com/YasinChan/typing/blob/7fdaa2ebc07c4c3606519d20e9cc684befacb696/src/common/color.ts#L72",target:"_blank",rel:"noopener noreferrer"};function z(H,I){const a=p("ExternalLinkIcon");return o(),c("div",null,[r,n("p",null,[s("地址："),n("a",u,[s("https://typing.yasinchan.com"),t(a)])]),n("p",null,[s("源码："),n("a",d,[s("https://github.com/YasinChan/typing"),t(a)])]),k,n("p",null,[s("这段 css 即是我所定义的用于主题色的自定义属性，我这里定义了两套分别为 "),m,s(" 和 "),h,s(" 的主题色，将其分别定义到"),n("a",v,[s("两个文件"),t(a)]),s("中，然后通过 "),b,s(" 动态加载文件的方式，结合 "),g,s(" 和 "),y,s(" Dom 操作的方式将主题文件移除、插入到 head 中，达到预设主题切换的功能，具体逻辑查看"),n("a",_,[s("文件"),t(a)]),s("。")]),f,x,C,n("p",null,[s("自定义主题的设置是将上述自定义属性重新赋值到 body 标签上，从而依赖 "),n("a",R,[s("css 优先级"),t(a)]),s("关系，达到覆盖预设样式的目的，具体逻辑可以查看"),n("a",S,[s("文件"),t(a)]),s("。")]),B,n("ol",null,[n("li",null,[w,N,n("p",null,[s("一般来说，主题主要分为两类：亮色主题和暗色主题。而在这两种情况下，在对上述所谓重要性的表达上是相反的，实际体验下来会发现，深色主题选择变暗，浅色主题选择变亮，来达到这个效果。可以在"),n("a",Y,[s("这里"),t(a)]),s("体验一下。")])]),n("li",null,[T,G,E,n("p",null,[s("基于此，我们可以通过对 RGB 中每个颜色都按照同一个比值进行缩放，从而达到变亮或者变暗的目的。同样可以查看方法 "),n("a",q,[s("lightenHexColor 和 darkenHexColor"),t(a)]),s("。")])])])])}const V=e(l,[["render",z],["__file","typing-intr.html.vue"]]),J=JSON.parse('{"path":"/post/typing-intr.html","title":"Typing 项目技术总结 - 通用模块（主题切换系列）","lang":"zh-CN","frontmatter":{"date":"2024-03-23T00:00:00.000Z","head":[["meta",{"name":"keywords","content":"typing, 主题, theme"}],["meta",{"name":"description","content":"https://typing.yasinchan.com/ 主题切换介绍"}]],"tag":["typing","change-theme","custom-theme"],"sticky":true,"excerpt":"<p>打字网站 <a href=\\"https://typing.yasinchan.com\\" target=\\"_blank\\">Typing</a> 介绍</p>"},"headers":[{"level":2,"title":"切换主题","slug":"切换主题","link":"#切换主题","children":[{"level":3,"title":"预设主题","slug":"预设主题","link":"#预设主题","children":[]},{"level":3,"title":"自定义主题","slug":"自定义主题","link":"#自定义主题","children":[]}]}],"git":{"updatedTime":1711364703000,"contributors":[{"name":"YasinChan","email":"yasinchan2016@gmail.com","commits":1},{"name":"yasinchan","email":"yasinchan2016@gmail.com","commits":1}]},"filePathRelative":"post/typing-intr.md"}');export{V as comp,J as data};
